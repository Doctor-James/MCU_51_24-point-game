C51 COMPILER V9.59.0.0   LCD                                                               06/21/2021 11:02:20 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE LCD
OBJECT MODULE PLACED IN .\Objects\Lcd.obj
COMPILER INVOKED BY: D:\keil_v5\C51\BIN\C51.EXE USER\Lcd.c LARGE OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Lis
                    -tings\Lcd.lst) TABS(2) OBJECT(.\Objects\Lcd.obj)

line level    source

   1          #include "main.h"
   2          unsigned char xdata lcd_1[32] ={//１[16*16]下半列排
   3          0x00,0x00,0x00,0x00,0x00,0x00,0x08,0xF8,
   4          0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
   5          0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,
   6          0x3F,0x20,0x00,0x00,0x00,0x00,0x00,0x00};
   7          unsigned char xdata lcd_2[32] ={//２[16*16]下半列排
   8          0x00,0x00,0x00,0x00,0x30,0x38,0x0C,0x04,
   9          0x04,0x0C,0xF8,0xF0,0x00,0x00,0x00,0x00,
  10          0x00,0x00,0x00,0x00,0x20,0x30,0x38,0x2C,
  11          0x26,0x23,0x21,0x38,0x00,0x00,0x00,0x00};
  12          unsigned char xdata lcd_3[32] ={//３[16*16]下半列排
  13          0x00,0x00,0x00,0x00,0x10,0x18,0x0C,0x84,
  14          0x84,0xCC,0x78,0x30,0x00,0x00,0x00,0x00,
  15          0x00,0x00,0x00,0x00,0x08,0x18,0x30,0x20,
  16          0x20,0x31,0x1F,0x0E,0x00,0x00,0x00,0x00};
  17          unsigned char xdata lcd_4[32] ={//４[16*16]下半列排
  18          0x00,0x00,0x00,0x00,0x80,0xC0,0x70,0x18,
  19          0xFC,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,
  20          0x00,0x00,0x00,0x06,0x07,0x05,0x04,0x24,
  21          0x3F,0x3F,0x24,0x04,0x00,0x00,0x00,0x00};
  22          unsigned char xdata lcd_5[32] ={//５[16*16]下半列排
  23          0x00,0x00,0x00,0x00,0xFC,0xFC,0xC4,0x44,
  24          0x44,0xC4,0x84,0x04,0x00,0x00,0x00,0x00,
  25          0x00,0x00,0x00,0x00,0x08,0x18,0x30,0x20,
  26          0x20,0x30,0x1F,0x0F,0x00,0x00,0x00,0x00};
  27          unsigned char xdata lcd_6[32] ={//６[16*16]下半列排
  28          0x00,0x00,0x00,0x00,0xF0,0xF8,0x8C,0x44,
  29          0x44,0xCC,0x98,0x10,0x00,0x00,0x00,0x00,
  30          0x00,0x00,0x00,0x00,0x0F,0x1F,0x30,0x20,
  31          0x20,0x30,0x1F,0x0F,0x00,0x00,0x00,0x00};
  32          unsigned char xdata lcd_7[32] ={//７[16*16]下半列排
  33          0x00,0x00,0x00,0x00,0x1C,0x0C,0x0C,0x0C,
  34          0xCC,0xEC,0x3C,0x1C,0x00,0x00,0x00,0x00,
  35          0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x3F,
  36          0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
  37          unsigned char xdata lcd_8[32] ={//８[16*16]下半列排
  38          0x00,0x00,0x00,0x00,0x30,0x78,0xCC,0x84,
  39          0x84,0xCC,0x78,0x30,0x00,0x00,0x00,0x00,
  40          0x00,0x00,0x00,0x00,0x0E,0x1F,0x31,0x20,
  41          0x20,0x31,0x1F,0x0E,0x00,0x00,0x00,0x00};
  42          unsigned char xdata lcd_9[32] ={//９[16*16]下半列排
  43          0x00,0x00,0x00,0x00,0xF0,0xF8,0x0C,0x04,
  44          0x04,0x0C,0xF8,0xF0,0x00,0x00,0x00,0x00,
  45          0x00,0x00,0x00,0x00,0x08,0x19,0x33,0x22,
  46          0x22,0x33,0x1F,0x0F,0x00,0x00,0x00,0x00};
  47          unsigned char xdata lcd_10[32] ={//Ａ[16*16]下半列排
  48          0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x18,
  49          0x0C,0x78,0xE0,0x80,0x00,0x00,0x00,0x00,
  50          0x00,0x00,0x00,0x20,0x3C,0x27,0x02,0x02,
  51          0x02,0x02,0x27,0x3F,0x3C,0x20,0x00,0x00};
  52          unsigned char xdata lcd_11[32] ={//Ｂ[16*16]下半列排
  53          0x00,0x00,0x00,0x04,0xFC,0xFC,0x84,0x84,
  54          0x84,0x84,0xCC,0xF8,0x38,0x00,0x00,0x00,
C51 COMPILER V9.59.0.0   LCD                                                               06/21/2021 11:02:20 PAGE 2   

  55          0x00,0x00,0x00,0x20,0x3F,0x3F,0x20,0x20,
  56          0x20,0x20,0x30,0x11,0x1F,0x0E,0x00,0x00};
  57          unsigned char xdata lcd_12[32] ={//Ｃ[16*16]下半列排
  58          0x00,0x00,0x00,0xE0,0xF0,0x18,0x0C,0x04,
  59          0x04,0x04,0x0C,0x18,0x18,0x00,0x00,0x00,
  60          0x00,0x00,0x00,0x07,0x0F,0x18,0x30,0x20,
  61          0x20,0x20,0x30,0x10,0x08,0x00,0x00,0x00};
  62          unsigned char xdata lcd_13[32] ={//Ｄ[16*16]下半列排
  63          0x00,0x00,0x00,0x04,0xFC,0xFC,0x04,0x04,
  64          0x04,0x0C,0x08,0x18,0xF0,0xE0,0x00,0x00,
  65          0x00,0x00,0x00,0x20,0x3F,0x3F,0x20,0x20,
  66          0x20,0x30,0x10,0x18,0x0F,0x07,0x00,0x00};
  67          
  68          unsigned char xdata lcd_14[32] ={//＋[16*16]下半列排
  69          0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,
  70          0xF8,0x80,0x80,0x80,0x80,0x00,0x00,0x00,
  71          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
  73          unsigned char xdata lcd_15[32] ={//－[16*16]下半列排
  74          0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,
  75          0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x00,
  76          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  77          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
  78          unsigned char xdata lcd_16[32] ={//×[16*16]下半列排
  79          0x00,0x00,0x00,0x00,0x10,0x20,0x40,0x80,
  80          0x00,0x80,0x40,0x20,0x10,0x00,0x00,0x00,
  81          0x00,0x00,0x00,0x00,0x10,0x08,0x04,0x02,
  82          0x01,0x02,0x04,0x08,0x10,0x00,0x00,0x00};
  83          unsigned char xdata lcd_17[32] ={//÷[16*16]下半列排
  84          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,
  85          0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  86          0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x19,
  87          0x19,0x01,0x01,0x01,0x01,0x00,0x00,0x00};
  88          unsigned char xdata lcd_18[32] ={//〈[16*16]下半列排
  89          0x00,0x00,0x00,0x00,0x00,0x80,0x40,0x20,
  90          0x10,0x08,0x00,0x00,0x00,0x00,0x00,0x00,
  91          0x00,0x00,0x00,0x00,0x01,0x02,0x04,0x08,
  92          0x10,0x20,0x00,0x00,0x00,0x00,0x00,0x00};
  93          unsigned char xdata lcd_19[32] ={//〉[16*16]下半列排
  94          0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x08,
  95          0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x00,
  96          0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x08,
  97          0x04,0x02,0x01,0x00,0x00,0x00,0x00,0x00};
  98          unsigned char xdata lcd_clean[32] ={
  99          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 100          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 101          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 102          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
 103          
 104          
 105          
 106          //将对应的数字映射为LCD屏上的数组
 107          void LCD_Map(unsigned char number,unsigned char lcd[])
 108          {
 109   1        switch(number)
 110   1        {
 111   2          case 0: memcpy(lcd,lcd_clean,32); delay(5);break;
 112   2          case 1: memcpy(lcd,lcd_1,32); delay(5);break;
 113   2          case 2: memcpy(lcd,lcd_2,32); delay(5);break;
 114   2          case 3: memcpy(lcd,lcd_3,32); delay(5);break;
 115   2          case 4: memcpy(lcd,lcd_4,32); delay(5);break;
 116   2          case 5: memcpy(lcd,lcd_5,32); delay(5);break;
C51 COMPILER V9.59.0.0   LCD                                                               06/21/2021 11:02:20 PAGE 3   

 117   2          case 6: memcpy(lcd,lcd_6,32); delay(5);break;
 118   2          case 7: memcpy(lcd,lcd_7,32); delay(5);break;
 119   2          case 8: memcpy(lcd,lcd_8,32); delay(5);break;
 120   2          case 9: memcpy(lcd,lcd_9,32); delay(5);break;
 121   2          case 10: memcpy(lcd,lcd_10,32); delay(5);break;
 122   2          case 11: memcpy(lcd,lcd_11,32); delay(5);break;
 123   2          case 12: memcpy(lcd,lcd_12,32); delay(5);break;
 124   2          case 13: memcpy(lcd,lcd_13,32); delay(5);break;
 125   2          case 14: memcpy(lcd,lcd_14,32); delay(5);break;
 126   2          case 15: memcpy(lcd,lcd_15,32); delay(5);break;
 127   2          case 16: memcpy(lcd,lcd_16,32); delay(5);break;
 128   2          case 17: memcpy(lcd,lcd_17,32); delay(5);break;
 129   2          case 18: memcpy(lcd,lcd_18,32); delay(5);break;
 130   2          case 19: memcpy(lcd,lcd_19,32); delay(5);break; 
 131   2        }
 132   1      
 133   1      }
 134          
 135          //左屏幕显示
 136          void display_32_left(unsigned char x,unsigned char y,unsigned char number[32])
 137          {
 138   1        unsigned char loop;
 139   1        set_adr(x,y);
 140   1        for(loop = 0;loop<16;loop++)
 141   1        {
 142   2          write_data(number[loop],1,0);
 143   2        }
 144   1        set_adr(x+1,y);
 145   1        for(loop = 16;loop<32;loop++)
 146   1        {
 147   2          write_data(number[loop],1,0);
 148   2        }
 149   1      }
 150          
 151          //右屏幕显示
 152          void display_32_right(unsigned char x,unsigned char y,unsigned char number[32])
 153          {
 154   1        unsigned char loop;
 155   1        set_adr(x,y);
 156   1        for(loop = 0;loop<16;loop++)
 157   1        {
 158   2          write_data(number[loop],0,1);
 159   2        }
 160   1        set_adr(x+1,y);
 161   1        for(loop = 16;loop<32;loop++)
 162   1        {
 163   2          write_data(number[loop],0,1);
 164   2        }
 165   1      }
 166          
 167          
 168          
 169          //写指令
 170          void write_code(unsigned char c,unsigned char cs1, unsigned char cs2)
 171          {
 172   1        LCD_CS1 = cs1;
 173   1        LCD_CS2 = cs2;
 174   1        LCD_RS = 0;
 175   1        LCD_RW = 0;
 176   1        P2 = c;
 177   1        LCD_E = 0;
 178   1        delay(10);
C51 COMPILER V9.59.0.0   LCD                                                               06/21/2021 11:02:20 PAGE 4   

 179   1        LCD_E = 1;
 180   1        delay(10);
 181   1        LCD_E = 0;
 182   1      }
 183          
 184          //写数据
 185          void write_data(unsigned char c,unsigned char cs1,unsigned char cs2)
 186          {
 187   1        LCD_CS1 = cs1;
 188   1        LCD_CS2 = cs2;
 189   1        LCD_RW = 0;
 190   1        LCD_RS = 1;
 191   1        P2 = c;
 192   1        LCD_E = 0;
 193   1        delay(10);
 194   1        LCD_E = 1;
 195   1        delay(10);
 196   1        LCD_E = 0;
 197   1      }
 198          
 199          
 200          void set_stratline(unsigned char line)
 201          {
 202   1        line = 0xc0+line;
 203   1        write_code(line,1,1); //最底层作为第一层
 204   1      }
 205          
 206          
 207          void set_adr(unsigned char x,unsigned char y)
 208          {
 209   1        x = x+0xb8;
 210   1        y = y+0x40;
 211   1        write_code(x,1,1);
 212   1        write_code(y,1,1);
 213   1      }
 214          
 215          void dis_on_off(unsigned char commnd)
 216          {
 217   1        commnd = commnd+0x3e;
 218   1        write_code(commnd,1,1);
 219   1      }
 220          
 221          void clear()
 222          {
 223   1        unsigned char i,j;
 224   1        for(i = 0;i<8;i++)
 225   1        {
 226   2          set_adr(i,0);
 227   2          for(j = 0;j<64;j++)
 228   2          {
 229   3            write_data(0x00,1,1);
 230   3          }
 231   2        }
 232   1      }
 233          
 234          
 235          
 236          
 237          
 238          
 239          

C51 COMPILER V9.59.0.0   LCD                                                               06/21/2021 11:02:20 PAGE 5   


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1028    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    640      18
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
